<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kelola Daftar Gambar</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <style>
    body { padding: 40px; font-family: Arial, sans-serif; }
    .container { max-width: 600px; }
  </style>
</head>
<body>
<div class="container">
  <h2>Kelola Daftar Gambar (/img)</h2>
  <form id="imgForm" class="form-inline" style="margin-bottom:20px;">
    <div class="form-group">
      <input type="text" id="imgName" class="form-control" placeholder="contoh: 17 atau foto1" required>
    </div>
    <button type="submit" class="btn btn-primary">Tambah</button>
  </form>

  <ul id="imgList" class="list-group"></ul>

  <a href="index.html" class="btn btn-success" style="margin-top:20px;">Lihat Slideshow</a>
</div>

<script>
  function getImages() {
    return JSON.parse(localStorage.getItem("imgFiles")) || [];
  }

  function saveImages(images) {
    localStorage.setItem("imgFiles", JSON.stringify(images));
  }

  function renderList() {
    const list = document.getElementById("imgList");
    const images = getImages();
    if (images.length === 0) {
      list.innerHTML = `<li class="list-group-item">Belum ada gambar</li>`;
      return;
    }
    list.innerHTML = images.map((file, idx) => `
      <li class="list-group-item">
        ${file}
        <button class="btn btn-danger btn-xs pull-right" onclick="deleteImg(${idx})">Hapus</button>
      </li>
    `).join("");
  }

  function deleteImg(index) {
    const images = getImages();
    images.splice(index, 1);
    saveImages(images);
    renderList();
  }

  document.getElementById("imgForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const input = document.getElementById("imgName");
    let file = input.value.trim();

    if (file) {
      // kalau user ngetik tanpa ekstensi â†’ otomatis tambahkan .png
      if (!file.toLowerCase().endsWith(".png")) {
        file = file + ".png";
      }

      const images = getImages();
      images.push(file);
      saveImages(images);
      input.value = "";
      renderList();
    }
  });

  renderList();
</script>
</body>
</html>
